# 视觉SLAM十四讲
[github](https://github.com/gaoxiang12/slambook)
pdf保存在百度网盘

## 第二讲：初识SLAM
### 常见视觉传感器
单目相机：通过移动相机，得到同一物体的视差，近处物体移动快，远处物体移动快，具有尺度不确定性（不知道相机移动了多少）。双目相机由于基线已知，因此可以消除尺度不确定性，但是要计算视差计算量很大。深度相机包括红外相机和TOF相机，直接进行物理测量，缺点是对不同环境稳定性差
### 经典SLAM框架组成
传感器，
视觉里程计：仅对相邻两帧图像进行处理
回环检测：通过图像相似性，进行场景匹配
后端优化：去除累积漂移
建图：构建地图
### SLAM本质：
对物体本身运动和周围环境不确定性的估计
### 地图分类
度量地图和拓扑地图，结合具体需求选择使用哪种地图

## 第三讲：三维空间刚体运动
### 旋转矩阵R
惯性坐标系==世界坐标系
相机坐标系到世界坐标系的转换，是欧式变换，即旋转+平移
旋转矩阵由两个坐标系的基向量组得到，又称为方向余弦矩阵，性质:行列式为1，为正交矩阵。反之，行列式为1的正交矩阵也是旋转矩阵
齐次坐标：将三维向量末尾加1，变为4维，得到齐次坐标
变换矩阵T：平移+旋转在齐次坐标系下，是线性变换
R属于特殊在正交群
T属于特殊欧式群

重要！！！坐标系的旋转与向量的旋转相反，因此旋转矩阵P1=R10*P0将向量P0旋转theta后得到P1，也可以理解为坐标系1相对坐标系0旋转-theta，也就是坐标系0旋转-theta到达坐标系1，P0向量在坐标系1坐标为P1
### 旋转向量
由于旋转矩阵有9个变量，一次旋转只有三个自由度，因此旋转矩阵存在约束（正交矩阵，行列式为1）
为了减少表达旋转需要的变量，引入旋转向量。事实上任意旋转都可以用一个旋转轴和旋转角表示，那么旋转向量的方向与旋转轴相同，长度与旋转角大小相同，那么就可以用3个变量表达旋转。
#### 旋转向量与旋转矩阵的相互转换关系：
旋转向量->旋转矩阵：罗德里格斯公式
旋转矩阵->旋转向量：由于旋转轴上的向量在旋转前后不变，因此旋转向量是旋转矩阵特征值为1时对应的特征向量
### 欧拉角
将旋转转换为常人更易理解的形式，将旋转分解为三个轴上的旋转。由于旋转的轴顺序是人为设定，以及是以旋转前的坐标轴为旋转轴还是旋转后的坐标轴为旋转轴也需要认为设定，因此不同系统中对欧拉角的定义不同。常用的欧拉角为ZYX即偏航-俯仰-滚转
#### 万向锁问题
[欧拉角奇异性](https://blog.csdn.net/lipi37/article/details/83871031)
欧拉角奇异性是值给定一个旋转矩阵R/姿态，对应的欧拉角不唯一，因此欧拉角不适合插值
[参考](https://blog.csdn.net/weixin_46135347/article/details/116453491)
当第二次旋转pitch角度为90度时，第一次旋转和第三次旋转将公用一个旋转轴，使得系统丢失一个自由度。因此欧拉角不适用于插值和迭代,通常用于人机交互可视化
欧拉角最直观、最容易理解、存储空间少，但是欧拉角存在万向锁现象、插值速度不均匀等缺点，而且不可以在计算机中直接运算；
四元素不存在万向锁问题、利用球面插值可以获得均匀的转速、存储空间也较少，但是不好理解、不直观；
旋转矩阵法是最便于计算机处理的，但不可以直接插值、冗余信息多、费存储空间，同样不直观。
运动轴旋转:Intrinsic rotations
固定轴旋转: Extrinsic rotations
一个很有意思却很不直观的结论：三次绕固定轴旋转的最终姿态和以相反顺序三次绕运动轴旋转的最终姿态相同。
### 四元数
四元数：一个实部，三个虚部
#### 四元数表示旋转
$p'=qpq^{-1}$其中q为表示旋转操作的四元数
#### 四元数转换为R
#### R转换为四元数

### 相似、仿射、射影变换
欧式变换：大小不变、形状不变
相似变换：增加伸缩变换
仿射变换：也叫正交投影，经过仿射变换，正方体就不是方的了，但是各个面/线仍然平行。可以理解为平行光源投影
射影变换：小孔成像就是射影变换，只有平面的相交相切关系被保留。可以理解为点光源投影




